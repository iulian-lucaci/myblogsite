---
layout: page
title: "Search"
permalink: /search/
---

<div id="search-container">
  <input type="text" id="search-input" placeholder="Search posts...">
  <div id="search-results"></div>
</div>

<script>
// Load search data
let searchData = [];

fetch('{{ "/search.json" | relative_url }}')
  .then(response => response.json())
  .then(data => {
    searchData = data;
  });

// Search function
function performSearch(query) {
  const resultsDiv = document.getElementById('search-results');
  
  if (!query.trim()) {
    resultsDiv.innerHTML = '';
    return;
  }
  
  const lowerQuery = query.toLowerCase();
  const results = searchData.filter(post => {
    const title = (post.title || '').toString().toLowerCase();
    const excerpt = (post.excerpt || '').toString().toLowerCase();
    const category = (post.category || '').toString().toLowerCase();
    return title.includes(lowerQuery) || excerpt.includes(lowerQuery) || category.includes(lowerQuery);
  });
  
  if (results.length === 0) {
    resultsDiv.innerHTML = '<p>No results found.</p>';
    return;
  }
  
  let html = '<ul>';
  results.forEach(post => {
    const safeTitle = post.title || '';
    const safeExcerpt = (post.excerpt || '').substring(0, 150);
    const safeDate = post.date || '';
    const safeCategory = post.category || '';
    const safeImage = post.image || '';
    html += `
      <li class="search-result-item">
        ${safeImage ? `<a class="search-thumb-link" href="{{ site.baseurl }}${post.url}"><img class="search-thumb" src="{{ site.baseurl }}${safeImage}" alt="${safeTitle}"></a>` : ''}
        <div class="search-result-body">
          <a href="{{ site.baseurl }}${post.url}"><strong>${safeTitle}</strong></a>
          <p>${safeExcerpt}...</p>
          <small>${safeDate} â€¢ ${safeCategory}</small>
        </div>
      </li>
    `;
  });
  html += '</ul>';
  
  resultsDiv.innerHTML = html;
}

// Search input event listener
document.getElementById('search-input').addEventListener('keyup', (e) => {
  performSearch(e.target.value);
});
</script>

<style>
#search-container {
  margin-top: 2rem;
}

#search-input {
  width: 100%;
  padding: 0.75rem;
  font-size: 1rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  margin-bottom: 1.5rem;
}

#search-results ul {
  list-style: none;
  padding: 0;
}

#search-results li {
  padding: 1rem;
  border-bottom: 1px solid #eee;
}

#search-results a {
  text-decoration: none;
  color: #007bff;
}

#search-results a:hover {
  text-decoration: underline;
}

#search-results p {
  margin: 0.5rem 0;
  color: #666;
  font-size: 0.9rem;
}

#search-results small {
  color: #999;
}

/* Thumbnail styles for search results */
.search-result-item {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
}
.search-thumb {
  width: 96px;
  height: 64px;
  object-fit: cover;
  border-radius: 4px;
  flex-shrink: 0;
}
.search-result-body {
  flex: 1 1 auto;
}
.search-thumb-link { display: inline-block; }
</style>
